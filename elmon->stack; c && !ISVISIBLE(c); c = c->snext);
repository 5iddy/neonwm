SSH-ADD(1)                       BSD General Commands Manual                      SSH-ADD(1)

NNAAMMEE
     sssshh--aadddd — adds private key identities to the OpenSSH authentication agent

SSYYNNOOPPSSIISS
     sssshh--aadddd [--ccDDddKKkkLLllqqvvXXxx] [--EE _f_i_n_g_e_r_p_r_i_n_t___h_a_s_h] [--SS _p_r_o_v_i_d_e_r] [--tt _l_i_f_e] [_f_i_l_e _._._.]
     sssshh--aadddd --ss _p_k_c_s_1_1
     sssshh--aadddd --ee _p_k_c_s_1_1
     sssshh--aadddd --TT _p_u_b_k_e_y _._._.

DDEESSCCRRIIPPTTIIOONN
     sssshh--aadddd adds private key identities to the authentication agent, ssh-agent(1).  When
     run without arguments, it adds the files _~_/_._s_s_h_/_i_d___r_s_a, _~_/_._s_s_h_/_i_d___d_s_a, _~_/_._s_s_h_/_i_d___e_c_d_s_a,
     _~_/_._s_s_h_/_i_d___e_c_d_s_a___s_k, _~_/_._s_s_h_/_i_d___e_d_2_5_5_1_9, and _~_/_._s_s_h_/_i_d___e_d_2_5_5_1_9___s_k.  After loading a pri‐
     vate key, sssshh--aadddd will try to load corresponding certificate information from the file‐
     name obtained by appending _-_c_e_r_t_._p_u_b to the name of the private key file.  Alternative
     file names can be given on the command line.

     If any file requires a passphrase, sssshh--aadddd asks for the passphrase from the user.  The
     passphrase is read from the user's tty.  sssshh--aadddd retries the last passphrase if multi‐
     ple identity files are given.

     The authentication agent must be running and the SSH_AUTH_SOCK environment variable
     must contain the name of its socket for sssshh--aadddd to work.

     The options are as follows:

     --cc      Indicates that added identities should be subject to confirmation before being
             used for authentication.  Confirmation is performed by ssh-askpass(1).  Suc‐
             cessful confirmation is signaled by a zero exit status from ssh-askpass(1),
             rather than text entered into the requester.

     --DD      Deletes all identities from the agent.

     --dd      Instead of adding identities, removes identities from the agent.  If sssshh--aadddd
             has been run without arguments, the keys for the default identities and their
             corresponding certificates will be removed.  Otherwise, the argument list will
             be interpreted as a list of paths to public key files to specify keys and cer‐
             tificates to be removed from the agent.  If no public key is found at a given
             path, sssshh--aadddd will append _._p_u_b and retry.  If the argument list consists of “-”
             then sssshh--aadddd will read public keys to be removed from standard input.

     --EE _f_i_n_g_e_r_p_r_i_n_t___h_a_s_h
             Specifies the hash algorithm used when displaying key fingerprints.  Valid op‐
             tions are: “md5” and “sha256”.  The default is “sha256”.

     --ee _p_k_c_s_1_1
             Remove keys provided by the PKCS#11 shared library _p_k_c_s_1_1.

     --KK      Load resident keys from a FIDO authenticator.

     --kk      When loading keys into or deleting keys from the agent, process plain private
             keys only and skip certificates.

     --LL      Lists public key parameters of all identities currently represented by the
             agent.

     --ll      Lists fingerprints of all identities currently represented by the agent.

     --qq      Be quiet after a successful operation.

     --SS _p_r_o_v_i_d_e_r
             Specifies a path to a library that will be used when adding FIDO authenticator-
             hosted keys, overriding the default of using the internal USB HID support.

     --ss _p_k_c_s_1_1
             Add keys provided by the PKCS#11 shared library _p_k_c_s_1_1.

     --TT _p_u_b_k_e_y _._._.
             Tests whether the private keys that correspond to the specified _p_u_b_k_e_y files
             are usable by performing sign and verify operations on each.

     --tt _l_i_f_e
             Set a maximum lifetime when adding identities to an agent.  The lifetime may be
             specified in seconds or in a time format specified in sshd_config(5).

     --vv      Verbose mode.  Causes sssshh--aadddd to print debugging messages about its progress.
             This is helpful in debugging problems.  Multiple --vv options increase the ver‐
             bosity.  The maximum is 3.

     --XX      Unlock the agent.

     --xx      Lock the agent with a password.

EENNVVIIRROONNMMEENNTT
     DISPLAY, SSH_ASKPASS and SSH_ASKPASS_REQUIRE
             If sssshh--aadddd needs a passphrase, it will read the passphrase from the current
             terminal if it was run from a terminal.  If sssshh--aadddd does not have a terminal
             associated with it but DISPLAY and SSH_ASKPASS are set, it will execute the
             program specified by SSH_ASKPASS (by default “ssh-askpass”) and open an X11
             window to read the passphrase.  This is particularly useful when calling
             sssshh--aadddd from a _._x_s_e_s_s_i_o_n or related script.

             SSH_ASKPASS_REQUIRE allows further control over the use of an askpass program.
             If this variable is set to “never” then sssshh--aadddd will never attempt to use one.
             If it is set to “prefer”, then sssshh--aadddd will prefer to use the askpass program
             instead of the TTY when requesting passwords.  Finally, if the variable is set
             to “force”, then the askpass program will be used for all passphrase input re‐
             gardless of whether DISPLAY is set.

     SSH_AUTH_SOCK
             Identifies the path of a UNIX-domain socket used to communicate with the agent.

     SSH_SK_PROVIDER
             Specifies a path to a library that will be used when loading any FIDO authenti‐
             cator-hosted keys, overriding the default of using the built-in USB HID sup‐
             port.

FFIILLEESS
     ~/.ssh/id_dsa
     ~/.ssh/id_ecdsa
     ~/.ssh/id_ecdsa_sk
     ~/.ssh/id_ed25519
     ~/.ssh/id_ed25519_sk
     ~/.ssh/id_rsa
             Contains the DSA, ECDSA, authenticator-hosted ECDSA, Ed25519, authenticator-
             hosted Ed25519 or RSA authentication identity of the user.

     Identity files should not be readable by anyone but the user.  Note that sssshh--aadddd ig‐
     nores identity files if they are accessible by others.

EEXXIITT SSTTAATTUUSS
     Exit status is 0 on success, 1 if the specified command fails, and 2 if sssshh--aadddd is un‐
     able to contact the authentication agent.

SSEEEE AALLSSOO
     ssh(1), ssh-agent(1), ssh-askpass(1), ssh-keygen(1), sshd(8)

AAUUTTHHOORRSS
     OpenSSH is a derivative of the original and free ssh 1.2.12 release by Tatu Ylonen.
     Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos, Theo de Raadt and Dug Song re‐
     moved many bugs, re-added newer features and created OpenSSH.  Markus Friedl contrib‐
     uted the support for SSH protocol versions 1.5 and 2.0.

BSD                                     July 14, 2020                                    BSD
